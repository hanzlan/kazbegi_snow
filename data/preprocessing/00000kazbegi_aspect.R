library(raster)
library(rgdal)
library(rgrass7)
setwd("C:/Users/andre/OneDrive/Dokumente/Masterarbeit/GEE/kazbegi/")
dem <- raster("./Kazbegi_DEM_30.tif")
snow <- raster("C:/Users/andre/OneDrive/Dokumente/Masterarbeit/GEE/Download_Leonie/original_files_Snow/20000226pterra.tif")
shape = readOGR(dsn = "C:/Users/andre/OneDrive/Dokumente/Masterarbeit/GEE/kazbegi", layer = "kazbegi")

print(projection(dem))
print(projection(snow))
plot(dem)
plot(snow)
plot(shape)
slope <- terrain(dem, opt="slope", unit="degrees", neighbors=8)
aspect <- terrain(dem, opt="aspect", unit="degrees", neighbors=8)
aspect_rad <- terrain(dem, opt="aspect", unit="radians", neighbors=8)
northness <- cos(aspect_rad)
eastness <- sin(aspect_rad)
dem_new = resample(dem, snow, "bilinear")
slope_new = resample(slope, snow, "bilinear")
aspect_new = resample(aspect, snow, "bilinear")
north_new = resample(northness, snow, "bilinear")
east_new = resample(eastness, snow, "bilinear")

#dem_new = crop(dem_new, shape)
dem_new = mask(dem_new,shape)
slope_new = mask(slope_new,shape)
aspect_new = mask(aspect_new,shape)
north_new = mask(north_new,shape)
east_new = mask(east_new,shape)
plot(dem_new)
plot(slope_new)
plot(aspect_new)
plot(north_new)
plot(east_new)
writeRaster(dem_new, filename="dem_kazbegi_clip.tif", format="GTiff", overwrite=TRUE)
writeRaster(slope_new, filename="slope_kazbegi_clip.tif", format="GTiff", overwrite=TRUE)
writeRaster(aspect_new, filename="aspect_kazbegi_clip.tif", format="GTiff", overwrite=TRUE)
writeRaster(north_new, filename="northness_kazbegi_clip.tif", format="GTiff", overwrite=TRUE)
writeRaster(east_new, filename="eastness_kazbegi_clip.tif", format="GTiff", overwrite=TRUE)


